package xiaoyu.algo.leetcode;

/**
 * æœç´¢æ—‹è½¬æ’åºæ•°ç»„
 * æ•´æ•°æ•°ç»„ nums æŒ‰å‡åºæ’åˆ—ï¼Œæ•°ç»„ä¸­çš„å€¼ äº’ä¸ç›¸åŒ ã€‚
 * <p>
 * åœ¨ä¼ é€’ç»™å‡½æ•°ä¹‹å‰ï¼Œnums åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªä¸‹æ ‡ kï¼ˆ0 <= k < nums.lengthï¼‰ä¸Šè¿›è¡Œäº† æ—‹è½¬ï¼Œä½¿æ•°ç»„å˜ä¸º [nums[k], nums[k+1], ..., nums[n-1], nums[0], nums[1], ..., nums[k-1]]ï¼ˆä¸‹æ ‡ ä» 0 å¼€å§‹ è®¡æ•°ï¼‰ã€‚ä¾‹å¦‚ï¼Œ [0,1,2,4,5,6,7] åœ¨ä¸‹æ ‡ 3 å¤„ç»æ—‹è½¬åå¯èƒ½å˜ä¸º [4,5,6,7,0,1,2] ã€‚
 * <p>
 * ç»™ä½  æ—‹è½¬å çš„æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° target ï¼Œå¦‚æœ nums ä¸­å­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ target ï¼Œåˆ™è¿”å›å®ƒçš„ç´¢å¼•ï¼Œå¦åˆ™è¿”å› -1 ã€‚
 * <p>
 * <p>
 * <p>
 * ç¤ºä¾‹ 1ï¼š
 * <p>
 * è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2], target = 0
 * è¾“å‡ºï¼š4
 * ç¤ºä¾‹ 2ï¼š
 * <p>
 * è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2], target = 3
 * è¾“å‡ºï¼š-1
 * ç¤ºä¾‹ 3ï¼š
 * <p>
 * è¾“å…¥ï¼šnums = [1], target = 0
 * è¾“å‡ºï¼š-1
 * <p>
 * <p>
 * æç¤ºï¼š
 * <p>
 * 1 <= nums.length <= 5000
 * -10^4 <= nums[i] <= 10^4
 * nums ä¸­çš„æ¯ä¸ªå€¼éƒ½ ç‹¬ä¸€æ— äºŒ
 * nums è‚¯å®šä¼šåœ¨æŸä¸ªç‚¹ä¸Šæ—‹è½¬
 * -10^4 <= target <= 10^4
 * <p>
 * <p>
 * è¿›é˜¶ï¼šä½ å¯ä»¥è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿ
 */
public class æœç´¢æ—‹è½¬æ’åºæ•°ç»„ {
    public int search(int[] nums, int target) {
        if (nums == null || nums.length == 0) {
            return -1;
        }
        if (nums.length == 1) {
            return nums[0] == target ? 0 : -1;
        }
        for (int i = 0; i < nums.length; i++) {
            if (nums[i] == target) {
                return i;
            }
            if (i > 0 && nums[i] < nums[i - 1]) {
                return binarySearch(nums, i, nums.length, target);
            }
        }
        return -1;
    }

    private int binarySearch(int[] nums, int left, int right, int target) {
        while (left < right) {
            int mid = (left + right) >> 1;
            if (nums[mid] == target) {
                return mid;
            }
            if (nums[mid] > target) {
                right = mid;
            } else {
                left = mid + 1;
            }
        }
        return -1;
    }

    /**
     * ğŸ“– æ–‡å­—é¢˜è§£
     * æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾
     * æ€è·¯å’Œç®—æ³•
     *
     * å¯¹äºæœ‰åºæ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾çš„æ–¹æ³•æŸ¥æ‰¾å…ƒç´ ã€‚
     *
     * ä½†æ˜¯è¿™é“é¢˜ä¸­ï¼Œæ•°ç»„æœ¬èº«ä¸æ˜¯æœ‰åºçš„ï¼Œè¿›è¡Œæ—‹è½¬ååªä¿è¯äº†æ•°ç»„çš„å±€éƒ¨æ˜¯æœ‰åºçš„ï¼Œè¿™è¿˜èƒ½è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾å—ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ã€‚
     *
     * å¯ä»¥å‘ç°çš„æ˜¯ï¼Œæˆ‘ä»¬å°†æ•°ç»„ä»ä¸­é—´åˆ†å¼€æˆå·¦å³ä¸¤éƒ¨åˆ†çš„æ—¶å€™ï¼Œä¸€å®šæœ‰ä¸€éƒ¨åˆ†çš„æ•°ç»„æ˜¯æœ‰åºçš„ã€‚æ‹¿ç¤ºä¾‹æ¥çœ‹ï¼Œæˆ‘ä»¬ä» 6 è¿™ä¸ªä½ç½®åˆ†å¼€ä»¥åæ•°ç»„å˜æˆäº† [4, 5, 6] å’Œ [7, 0, 1, 2] ä¸¤ä¸ªéƒ¨åˆ†ï¼Œå…¶ä¸­å·¦è¾¹ [4, 5, 6] è¿™ä¸ªéƒ¨åˆ†çš„æ•°ç»„æ˜¯æœ‰åºçš„ï¼Œå…¶ä»–ä¹Ÿæ˜¯å¦‚æ­¤ã€‚
     *
     * è¿™å¯ç¤ºæˆ‘ä»¬å¯ä»¥åœ¨å¸¸è§„äºŒåˆ†æŸ¥æ‰¾çš„æ—¶å€™æŸ¥çœ‹å½“å‰ mid ä¸ºåˆ†å‰²ä½ç½®åˆ†å‰²å‡ºæ¥çš„ä¸¤ä¸ªéƒ¨åˆ† [l, mid] å’Œ [mid + 1, r] å“ªä¸ªéƒ¨åˆ†æ˜¯æœ‰åºçš„ï¼Œå¹¶æ ¹æ®æœ‰åºçš„é‚£ä¸ªéƒ¨åˆ†ç¡®å®šæˆ‘ä»¬è¯¥å¦‚ä½•æ”¹å˜äºŒåˆ†æŸ¥æ‰¾çš„ä¸Šä¸‹ç•Œï¼Œå› ä¸ºæˆ‘ä»¬èƒ½å¤Ÿæ ¹æ®æœ‰åºçš„é‚£éƒ¨åˆ†åˆ¤æ–­å‡º target åœ¨ä¸åœ¨è¿™ä¸ªéƒ¨åˆ†ï¼š
     *
     * å¦‚æœ [l, mid - 1] æ˜¯æœ‰åºæ•°ç»„ï¼Œä¸” target çš„å¤§å°æ»¡è¶³ [\textit{nums}[l],\textit{nums}[mid])[nums[l],nums[mid])ï¼Œåˆ™æˆ‘ä»¬åº”è¯¥å°†æœç´¢èŒƒå›´ç¼©å°è‡³ [l, mid - 1]ï¼Œå¦åˆ™åœ¨ [mid + 1, r] ä¸­å¯»æ‰¾ã€‚
     * å¦‚æœ [mid, r] æ˜¯æœ‰åºæ•°ç»„ï¼Œä¸” target çš„å¤§å°æ»¡è¶³ (\textit{nums}[mid+1],\textit{nums}[r]](nums[mid+1],nums[r]]ï¼Œåˆ™æˆ‘ä»¬åº”è¯¥å°†æœç´¢èŒƒå›´ç¼©å°è‡³ [mid + 1, r]ï¼Œå¦åˆ™åœ¨ [l, mid - 1] ä¸­å¯»æ‰¾ã€‚
     *
     *
     * éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒäºŒåˆ†çš„å†™æ³•æœ‰å¾ˆå¤šç§ï¼Œæ‰€ä»¥åœ¨åˆ¤æ–­ target å¤§å°ä¸æœ‰åºéƒ¨åˆ†çš„å…³ç³»çš„æ—¶å€™å¯èƒ½ä¼šå‡ºç°ç»†èŠ‚ä¸Šçš„å·®åˆ«ã€‚
     *
     * C++JavaPython3
     *
     * class Solution {
     *     public int search(int[] nums, int target) {
     *         int n = nums.length;
     *         if (n == 0) {
     *             return -1;
     *         }
     *         if (n == 1) {
     *             return nums[0] == target ? 0 : -1;
     *         }
     *         int l = 0, r = n - 1;
     *         while (l <= r) {
     *             int mid = (l + r) / 2;
     *             if (nums[mid] == target) {
     *                 return mid;
     *             }
     *             if (nums[0] <= nums[mid]) {
     *                 if (nums[0] <= target && target < nums[mid]) {
     *                     r = mid - 1;
     *                 } else {
     *                     l = mid + 1;
     *                 }
     *             } else {
     *                 if (nums[mid] < target && target <= nums[n - 1]) {
     *                     l = mid + 1;
     *                 } else {
     *                     r = mid - 1;
     *                 }
     *             }
     *         }
     *         return -1;
     *     }
     * }
     * å¤æ‚åº¦åˆ†æ
     *
     * æ—¶é—´å¤æ‚åº¦ï¼š O(\log n)O(logn)ï¼Œå…¶ä¸­ nn ä¸º \textit{nums}nums æ•°ç»„çš„å¤§å°ã€‚æ•´ä¸ªç®—æ³•æ—¶é—´å¤æ‚åº¦å³ä¸ºäºŒåˆ†æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ O(\log n)O(logn)ã€‚
     *
     * ç©ºé—´å¤æ‚åº¦ï¼š O(1)O(1) ã€‚æˆ‘ä»¬åªéœ€è¦å¸¸æ•°çº§åˆ«çš„ç©ºé—´å­˜æ”¾å˜é‡ã€‚
     *
     * ä½œè€…ï¼šLeetCode-Solution
     * é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/search-in-rotated-sorted-array/solution/sou-suo-xuan-zhuan-pai-xu-shu-zu-by-leetcode-solut/
     * æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰
     * è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚
     */
}
